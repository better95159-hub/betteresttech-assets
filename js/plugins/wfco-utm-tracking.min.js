var wffnUtm_terms=wffnUtm.cookieKeys,wffnCookieManage={setCookie:function(e,r,n){var t=new Date,n=(t.setTime(t.getTime()+24*n*60*60*1e3),"expires="+t.toUTCString()),t=";domain=."+wffnGetHost(document.location.hostname);document.cookie=e+"="+r+";"+n+t+";path=/"},getCookie:function(e){for(var r=e+"=",n=document.cookie.split(";"),t=0;t<n.length;t++){for(var o=n[t];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(r))return o.substring(r.length,o.length)}return""},remove:function(e){var r=new Date,r=(r.setTime(r.getTime()-864e5),"expires="+r.toUTCString());document.cookie=e+"=;"+r+";path=/"},commons:{inArray:function(e,r){return-1===r.indexOf(e)}}};function wffnGetHost(e){for(var t={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},r=t.parser[t.strictMode?"strict":"loose"].exec(e),o={},n=14;n--;)o[t.key[n]]=r[n]||"";return o[t.q.name]={},o[t.key[12]].replace(t.q.parser,function(e,r,n){r&&(o[t.q.name][r]=n)}),o.host.replace("www.","")}function wffnGetQueryVars(){try{var r,n={};return window.location.search.substr(1).split("&").forEach(function(e){1<(r=e.split("=")).length&&(n[r[0]]=r[1])}),wffnDefaultEvent(n)}catch(e){console.log(e)}}function wffnDefaultEvent(e){if("object"==typeof Intl&&"object"==typeof Intl.DateTimeFormat()&&(r=Intl.DateTimeFormat().resolvedOptions()).hasOwnProperty("timeZone")&&(e.timezone=r.timeZone),e.flt=wffnGetAdminTime(),e.hasOwnProperty("fkreferrer")&&""!==e.fkreferrer)e.referrer=e.fkreferrer,delete e.fkreferrer;else{let n=document.referrer;e.referrer=!n||wffnUtm.excludeDomain.some(e=>{return r=n,new URL(r).hostname.endsWith(e);var r})||n.includes(window.location.hostname)?"":n}e.fl_url=void 0!==window.location.pathname?window.location.pathname:"/";var r=wffnDetectDevice();return void 0!==r&&""!==r&&(void 0!==r.browser.name&&(e.browser=r.browser.name),void 0!==r.is_mobile)&&(e.is_mobile=r.is_mobile),e}function wffnGetAdminTime(e=!1,r=!1){var n=(new Date).toISOString(),t=new Date(n),[n,o]=(t.setMinutes(t.getMinutes()+parseInt(wffnUtm.utc_offset)),(n=t.toISOString()).split("T")),[n,f,a]=n.split("-").map(Number),[o,i,s]=o.split(":"),s=s.split(".")[0];return!0===e?(t=new Date(n+"-"+f+"-"+a+" "+o+":"+i+":"+s),Math.round(t.getTime()/1e3)):!0===r?new Date(n+"-"+f+"-"+a+" "+o+":"+i+":"+s):n+"-"+f+"-"+a+" "+o+":"+i+":"+s}function wffnGetTrafficSource(){try{var e=document.referrer.toString(),r=0===e.length,n=!r&&0===e.indexOf(wffnUtm.site_url),t=!(r||n),o=""!==wffnCookieManage.getCookie("wffn_traffic_source")&&wffnCookieManage.getCookie("wffn_traffic_source");return!1==t?o||"direct":o&&o===e?o:e}catch(e){return""}}function wffnManageCookies(){try{var e,r=wffnGetTrafficSource(),n=("direct"!==r?wffnCookieManage.setCookie("wffn_traffic_source",r,2):wffnCookieManage.remove("wffn_traffic_source"),wffnGetQueryVars());for(e in wffnUtm_terms)Object.prototype.hasOwnProperty.call(n,wffnUtm_terms[e])&&(-1===["flt","fl_url","referrer"].indexOf(wffnUtm_terms[e])||void 0!==wffnCookieManage&&""===wffnCookieManage.getCookie("wffn_"+wffnUtm_terms[e]))&&wffnCookieManage.setCookie("wffn_"+wffnUtm_terms[e],n[wffnUtm_terms[e]],2)}catch(e){console.log(e)}}function wffnGetUTMs(){try{var e,r={},n=wffnGetQueryVars();for(e in wffnUtm_terms)""===wffnCookieManage.getCookie("wffn_"+wffnUtm_terms[e])&&Object.prototype.hasOwnProperty.call(n,wffnUtm_terms[e])&&(r[wffnUtm_terms[e]]=wffnCookieManage.getCookie("wffn_"+wffnUtm_terms[e]));return r}catch(e){return{}}}function wffnAddTrafficParamsToEvent(r){try{var e,n=wffnUtm.genericParamEvents,t=JSON.parse(n);for(e in t)r[e]=t[e];var o,f=wffnGetAdminTime(!1,!0),a=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][f.getDay()],i=["January","February","March","April","May","June","July","August","September","October","November","December"][f.getMonth()],s=["00-01","01-02","02-03","03-04","04-05","05-06","06-07","07-08","08-09","09-10","10-11","11-12","12-13","13-14","14-15","15-16","16-17","17-18","18-19","19-20","20-21","21-22","22-23","23-24"][f.getHours()],c=(r.event_month=i,r.event_day=a,r.event_hour=s,r.traffic_source=wffnGetTrafficSource(),wffnGetUTMs());for(o in c)r[o]=c[o];return r}catch(e){return r}}function wffnDetectDevice(){var e=[navigator.userAgent,navigator.vendor,window.opera];let r=!1;!1===(r=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?!0:r)&&(-1<(n=navigator.userAgent||navigator.vendor||window.opera).indexOf("FBAN")||-1<n.indexOf("FBAV"))&&(r=!0);var n=wffnDetectBrowser(e.join(" "),[{name:"Chrome",value:"Chrome",version:"Chrome"},{name:"Firefox",value:"Firefox",version:"Firefox"},{name:"Safari",value:"Safari",version:"Version"},{name:"Internet Explorer",value:"MSIE",version:"MSIE"},{name:"Opera",value:"Opera",version:"Opera"},{name:"BlackBerry",value:"CLDC",version:"CLDC"},{name:"Mozilla",value:"Mozilla",version:"Mozilla"}]);return{is_mobile:r,browser:n}}function wffnDetectBrowser(e,r){for(var n,t,o,f=0,a=0,f=0;f<r.length;f+=1)if(new RegExp(r[f].value,"i").test(e)){if(n=new RegExp(r[f].version+"[- /:;]([\\d._]+)","i"),o="",t=(t=e.match(n))&&t[1]?t[1]:t)for(t=t.split(/[._]+/),a=0;a<t.length;a+=1)o+=0===a?t[a]+".":t[a];else o="0";return{name:r[f].name,version:parseFloat(o)}}return{name:"unknown",version:0}}wffnManageCookies();